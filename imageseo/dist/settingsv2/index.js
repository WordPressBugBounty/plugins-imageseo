(()=>{"use strict";var e={580:e=>{var t=/["'&<>]/;e.exports=function(e){var a,n=""+e,r=t.exec(n);if(!r)return n;var i="",o=0,l=0;for(o=r.index;o<n.length;o++){switch(n.charCodeAt(o)){case 34:a="&quot;";break;case 38:a="&amp;";break;case 39:a="&#39;";break;case 60:a="&lt;";break;case 62:a="&gt;";break;default:continue}l!==o&&(i+=n.substring(l,o)),l=o+1,i+=a}return l!==o?i+n.substring(l,o):i}},63:(e,t,a)=>{var n=a(609),r="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=n.useState,o=n.useEffect,l=n.useLayoutEffect,s=n.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!r(e,a)}catch(e){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var a=t(),n=i({inst:{value:a,getSnapshot:t}}),r=n[0].inst,u=n[1];return l((function(){r.value=a,r.getSnapshot=t,c(r)&&u({inst:r})}),[e,a,t]),o((function(){return c(r)&&u({inst:r}),e((function(){c(r)&&u({inst:r})}))}),[e]),s(a),a};t.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:u},888:(e,t,a)=>{e.exports=a(63)},609:e=>{e.exports=window.React}},t={};function a(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,a),i.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var r=n.length-1;r>-1&&(!e||!/^http(s?):/.test(e));)e=n[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e})(),(()=>{var e=a(609),t=a.n(e);const n=window.wp.components,r=window.wp.element,i=a.p+"images/default_logo.a24dbeff.png",o=window.wp.i18n,l=window.wp.apiFetch;var s=a.n(l);const c=async e=>await s()({path:e,method:"GET"}),u=async([e,t])=>(await s()({path:e,method:"POST",data:t})).data;var m=a(888);const d=()=>{},g=d(),p=Object,h=e=>e===g,f=e=>"function"==typeof e,_=(e,t)=>({...e,...t}),v=new WeakMap;let y=0;const b=e=>{const t=typeof e,a=e&&e.constructor,n=a==Date;let r,i;if(p(e)!==e||n||a==RegExp)r=n?e.toJSON():"symbol"==t?e.toString():"string"==t?JSON.stringify(e):""+e;else{if(r=v.get(e),r)return r;if(r=++y+"~",v.set(e,r),a==Array){for(r="@",i=0;i<e.length;i++)r+=b(e[i])+",";v.set(e,r)}if(a==p){r="#";const t=p.keys(e).sort();for(;!h(i=t.pop());)h(e[i])||(r+=i+":"+b(e[i])+",");v.set(e,r)}}return r},E=new WeakMap,R={},w={},S="undefined",C=typeof window!=S,T=typeof document!=S,x=(e,t)=>{const a=E.get(e);return[()=>!h(t)&&e.get(t)||R,n=>{if(!h(t)){const r=e.get(t);t in w||(w[t]=r),a[5](t,_(r,n),r||R)}},a[6],()=>!h(t)&&t in w?w[t]:!h(t)&&e.get(t)||R]};let k=!0;const[N,O]=C&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[d,d],L={isOnline:()=>k,isVisible:()=>{const e=T&&document.visibilityState;return h(e)||"hidden"!==e}},I={initFocus:e=>(T&&document.addEventListener("visibilitychange",e),N("focus",e),()=>{T&&document.removeEventListener("visibilitychange",e),O("focus",e)}),initReconnect:e=>{const t=()=>{k=!0,e()},a=()=>{k=!1};return N("online",t),N("offline",a),()=>{O("online",t),O("offline",a)}}},M=!e.useId,A=!C||"Deno"in window,P=A?e.useEffect:e.useLayoutEffect,F="undefined"!=typeof navigator&&navigator.connection,z=!A&&F&&(["slow-2g","2g"].includes(F.effectiveType)||F.saveData),B=e=>{if(f(e))try{e=e()}catch(t){e=""}const t=e;return[e="string"==typeof e?e:(Array.isArray(e)?e.length:e)?b(e):"",t]};let D=0;const H=()=>++D;async function $(...e){const[t,a,n,r]=e,i=_({populateCache:!0,throwOnError:!0},"boolean"==typeof r?{revalidate:r}:r||{});let o=i.populateCache;const l=i.rollbackOnError;let s=i.optimisticData;const c=i.throwOnError;if(f(a)){const e=a,n=[],r=t.keys();for(const a of r)!/^\$(inf|sub)\$/.test(a)&&e(t.get(a)._k)&&n.push(a);return Promise.all(n.map(u))}return u(a);async function u(a){const[r]=B(a);if(!r)return;const[u,m]=x(t,r),[d,p,_,v]=E.get(t),y=()=>{const e=d[r];return(f(i.revalidate)?i.revalidate(u().data,a):!1!==i.revalidate)&&(delete _[r],delete v[r],e&&e[0])?e[0](2).then((()=>u().data)):u().data};if(e.length<3)return y();let b,R=n;const w=H();p[r]=[w,0];const S=!h(s),C=u(),T=C.data,k=C._c,N=h(k)?T:k;if(S&&(s=f(s)?s(N,T):s,m({data:s,_c:N})),f(R))try{R=R(N)}catch(e){b=e}if(R&&f(R.then)){if(R=await R.catch((e=>{b=e})),w!==p[r][0]){if(b)throw b;return R}b&&S&&(e=>"function"==typeof l?l(e):!1!==l)(b)&&(o=!0,m({data:N,_c:g}))}if(o&&!b)if(f(o)){const e=o(R,N);m({data:e,error:g,_c:g})}else m({data:R,error:g,_c:g});if(p[r][1]=H(),Promise.resolve(y()).then((()=>{m({_c:g})})),!b)return R;if(c)throw b}}const j=(e,t)=>{for(const a in e)e[a][0]&&e[a][0](t)},V=(e,t)=>{if(!E.has(e)){const a=_(I,t),n={},r=$.bind(g,e);let i=d;const o={},l=(e,t)=>{const a=o[e]||[];return o[e]=a,a.push(t),()=>a.splice(a.indexOf(t),1)},s=(t,a,n)=>{e.set(t,a);const r=o[t];if(r)for(const e of r)e(a,n)},c=()=>{if(!E.has(e)&&(E.set(e,[n,{},{},{},r,s,l]),!A)){const t=a.initFocus(setTimeout.bind(g,j.bind(g,n,0))),r=a.initReconnect(setTimeout.bind(g,j.bind(g,n,1)));i=()=>{t&&t(),r&&r(),E.delete(e)}}};return c(),[e,r,c,i]}return[e,E.get(e)[4]]},[G,W]=V(new Map),U=_({onLoadingSlow:d,onSuccess:d,onError:d,onErrorRetry:(e,__,t,a,n)=>{const r=t.errorRetryCount,i=n.retryCount,o=~~((Math.random()+.5)*(1<<(i<8?i:8)))*t.errorRetryInterval;!h(r)&&i>r||setTimeout(a,o,n)},onDiscarded:d,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:z?1e4:5e3,focusThrottleInterval:5e3,dedupingInterval:2e3,loadingTimeout:z?5e3:3e3,compare:(e,t)=>b(e)==b(t),isPaused:()=>!1,cache:G,mutate:W,fallback:{}},L),K=(e,t)=>{const a=_(e,t);if(t){const{use:n,fallback:r}=e,{use:i,fallback:o}=t;n&&i&&(a.use=n.concat(i)),r&&o&&(a.fallback=_(r,o))}return a},Y=(0,e.createContext)({}),q=C&&window.__SWR_DEVTOOLS_USE__,J=q?window.__SWR_DEVTOOLS_USE__:[],X=J.concat((e=>(t,a,n)=>e(t,a&&((...e)=>{const[n]=B(t),[,,,r]=E.get(G);if(n.startsWith("$inf$"))return a(...e);const i=r[n];return h(i)?a(...e):(delete r[n],i)}),n)));q&&(window.__SWR_DEVTOOLS_REACT__=e);const Q=e.use||(e=>{if("pending"===e.status)throw e;if("fulfilled"===e.status)return e.value;throw"rejected"===e.status?e.reason:(e.status="pending",e.then((t=>{e.status="fulfilled",e.value=t}),(t=>{e.status="rejected",e.reason=t})),e)}),Z={dedupe:!0},ee=(p.defineProperty((t=>{const{value:a}=t,n=(0,e.useContext)(Y),r=f(a),i=(0,e.useMemo)((()=>r?a(n):a),[r,n,a]),o=(0,e.useMemo)((()=>r?i:K(n,i)),[r,n,i]),l=i&&i.provider,s=(0,e.useRef)(g);l&&!s.current&&(s.current=V(l(o.cache||G),i));const c=s.current;return c&&(o.cache=c[0],o.mutate=c[1]),P((()=>{if(c)return c[2]&&c[2](),c[3]}),[]),(0,e.createElement)(Y.Provider,_(t,{value:o}))}),"defaultValue",{value:U}),te=(t,a,n)=>{const{cache:r,compare:i,suspense:o,fallbackData:l,revalidateOnMount:s,revalidateIfStale:c,refreshInterval:u,refreshWhenHidden:d,refreshWhenOffline:p,keepPreviousData:v}=n,[y,b,R,w]=E.get(r),[T,k]=B(t),N=(0,e.useRef)(!1),O=(0,e.useRef)(!1),L=(0,e.useRef)(T),I=(0,e.useRef)(a),F=(0,e.useRef)(n),z=()=>F.current,D=()=>z().isVisible()&&z().isOnline(),[j,V,G,W]=x(r,T),U=(0,e.useRef)({}).current,K=h(l)?n.fallback[T]:l,Y=(e,t)=>{for(const a in U){const n=a;if("data"===n){if(!i(e[n],t[n])){if(!h(e[n]))return!1;if(!i(ie,t[n]))return!1}}else if(t[n]!==e[n])return!1}return!0},q=(0,e.useMemo)((()=>{const e=!!T&&!!a&&(h(s)?!z().isPaused()&&!o&&(!!h(c)||c):s),t=t=>{const a=_(t);return delete a._k,e?{isValidating:!0,isLoading:!0,...a}:a},n=j(),r=W(),i=t(n),l=n===r?i:t(r);let u=i;return[()=>{const e=t(j());return Y(e,u)?(u.data=e.data,u.isLoading=e.isLoading,u.isValidating=e.isValidating,u.error=e.error,u):(u=e,e)},()=>l]}),[r,T]),J=(0,m.useSyncExternalStore)((0,e.useCallback)((e=>G(T,((t,a)=>{Y(a,t)||e()}))),[r,T]),q[0],q[1]),X=!N.current,ee=y[T]&&y[T].length>0,te=J.data,ae=h(te)?K:te,ne=J.error,re=(0,e.useRef)(ae),ie=v?h(te)?re.current:te:ae,oe=!(ee&&!h(ne))&&(X&&!h(s)?s:!z().isPaused()&&(o?!h(ae)&&c:h(ae)||c)),le=!!(T&&a&&X&&oe),se=h(J.isValidating)?le:J.isValidating,ce=h(J.isLoading)?le:J.isLoading,ue=(0,e.useCallback)((async e=>{const t=I.current;if(!T||!t||O.current||z().isPaused())return!1;let a,r,o=!0;const l=e||{},s=!R[T]||!l.dedupe,c=()=>M?!O.current&&T===L.current&&N.current:T===L.current,u={isValidating:!1,isLoading:!1},m=()=>{V(u)},d=()=>{const e=R[T];e&&e[1]===r&&delete R[T]},p={isValidating:!0};h(j().data)&&(p.isLoading=!0);try{if(s&&(V(p),n.loadingTimeout&&h(j().data)&&setTimeout((()=>{o&&c()&&z().onLoadingSlow(T,n)}),n.loadingTimeout),R[T]=[t(k),H()]),[a,r]=R[T],a=await a,s&&setTimeout(d,n.dedupingInterval),!R[T]||R[T][1]!==r)return s&&c()&&z().onDiscarded(T),!1;u.error=g;const e=b[T];if(!h(e)&&(r<=e[0]||r<=e[1]||0===e[1]))return m(),s&&c()&&z().onDiscarded(T),!1;const l=j().data;u.data=i(l,a)?l:a,s&&c()&&z().onSuccess(a,T,n)}catch(e){d();const t=z(),{shouldRetryOnError:a}=t;t.isPaused()||(u.error=e,s&&c()&&(t.onError(e,T,t),(!0===a||f(a)&&a(e))&&(z().revalidateOnFocus&&z().revalidateOnReconnect&&!D()||t.onErrorRetry(e,T,t,(e=>{const t=y[T];t&&t[0]&&t[0](3,e)}),{retryCount:(l.retryCount||0)+1,dedupe:!0}))))}return o=!1,m(),!0}),[T,r]),me=(0,e.useCallback)(((...e)=>$(r,L.current,...e)),[]);if(P((()=>{I.current=a,F.current=n,h(te)||(re.current=te)})),P((()=>{if(!T)return;const e=ue.bind(g,Z);let t=0;const a=((e,t,a)=>{const n=t[e]||(t[e]=[]);return n.push(a),()=>{const e=n.indexOf(a);e>=0&&(n[e]=n[n.length-1],n.pop())}})(T,y,((a,n={})=>{if(0==a){const a=Date.now();z().revalidateOnFocus&&a>t&&D()&&(t=a+z().focusThrottleInterval,e())}else if(1==a)z().revalidateOnReconnect&&D()&&e();else{if(2==a)return ue();if(3==a)return ue(n)}}));return O.current=!1,L.current=T,N.current=!0,V({_k:k}),oe&&(h(ae)||A?e():(n=e,C&&typeof window.requestAnimationFrame!=S?window.requestAnimationFrame(n):setTimeout(n,1))),()=>{O.current=!0,a()};var n}),[T]),P((()=>{let e;function t(){const t=f(u)?u(j().data):u;t&&-1!==e&&(e=setTimeout(a,t))}function a(){j().error||!d&&!z().isVisible()||!p&&!z().isOnline()?t():ue(Z).then(t)}return t(),()=>{e&&(clearTimeout(e),e=-1)}}),[u,d,p,T]),(0,e.useDebugValue)(ie),o&&h(ae)&&T){if(!M&&A)throw new Error("Fallback data is required when using suspense in SSR.");I.current=a,F.current=n,O.current=!1;const e=w[T];if(!h(e)){const t=me(e);Q(t)}if(!h(ne))throw ne;{const e=ue(Z);h(ie)||(e.status="fulfilled",e.value=!0),Q(e)}}return{mutate:me,get data(){return U.data=!0,ie},get error(){return U.error=!0,ne},get isValidating(){return U.isValidating=!0,se},get isLoading(){return U.isLoading=!0,ce}}},function(...t){const a=_(U,(0,e.useContext)(Y)),[n,r,i]=(e=>f(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(null===e[1]?e[2]:e[1])||{}])(t),o=K(a,i);let l=te;const{use:s}=o,c=(s||[]).concat(X);for(let e=c.length;e--;)l=c[e](l);return l(n,r||o.fetcher||null,o)});var te;const ae={options:"undefined"!=typeof imageSeoSettings?imageSeoSettings:{},global:"undefined"!=typeof imageSeoGlobal?imageSeoGlobal:{}},ne="SET_OPTIONS",re="OPTIONS_MODIFIED",ie=(e,t)=>{switch(t.type){case ne:return{...e,options:{...e.options,...t.payload}};case re:return{...e,optionsModified:t.payload};default:return e}},oe=(0,r.createContext)(ae),le=({children:e})=>{const t=(0,r.useRef)(!0),[a,n]=(0,r.useState)([]),[i,l]=(0,r.useState)(!1),[c,u]=(0,r.useReducer)(ie,ae),[m,d]=((e,t,a={leading:!1})=>{const[n,i]=(0,r.useState)(e),o=(0,r.useRef)(null),l=(0,r.useRef)(!0),s=()=>window.clearTimeout(o.current);return(0,r.useEffect)((()=>s),[]),[n,(0,r.useCallback)((e=>{s(),l.current&&a.leading?i(e):o.current=window.setTimeout((()=>{l.current=!0,i(e)}),t),l.current=!1}),[a.leading,t])]})(ae.options,500),g=(0,r.useCallback)(((e,t=!1)=>{u({type:ne,payload:e}),t||(u({type:re,payload:!0}),d({...c.options,...e}))}),[d,c.options]),p=(0,r.useCallback)((e=>{const t={id:(new Date).getTime(),...e,content:e?.content||"",politeness:e?.politeness||"polite",actions:e?.actions||[],explicitDismiss:e?.explicitDismiss||!1};n((e=>[...e,t]))}),[]),h=(0,r.useCallback)((e=>{n((t=>t.filter((t=>t.id!==e))))}),[]),f=(0,r.useMemo)((()=>({options:c.options,global:c.global,loading:i,setOptions:g,addNotice:p,removeNotice:h,notices:a})),[p,i,a,h,g,c.global,c.options]),_=(0,r.useMemo)((()=>m),[m]);return(0,r.useEffect)((()=>{t.current||c.optionsModified&&(async(e,t)=>{try{const{user:e,...a}=t;await s()({path:"imageseo/v1/settings",method:"POST",data:{...a}})}catch(e){console.error("Error saving settings:",e)}})(0,_).then((()=>{l(!1),p({status:"info",content:(0,o.__)("Options saved","imageseo")})})).catch((e=>{console.warn(e),p({status:"error",content:(0,o.__)("Error saving options","imageseo")}),l(!1)}))}),[p,_,c.optionsModified]),(0,r.useEffect)((()=>{t.current&&(t.current=!1)}),[]),React.createElement(oe.Provider,{value:f},e)},se=()=>{const e=(0,r.useContext)(oe);if(void 0===e)throw new Error("useSettings must be used within a SettingsProvider");return e},ce=({heading:e,children:t,saveButton:a})=>{const{options:l}=se(),{data:s,isLoading:c}=(e=>{const[t,a]=(0,r.useState)(!0),{setOptions:n,addNotice:i}=se(),{data:o,error:l,isLoading:s,mutate:c}=ee([e?"/imageseo/v1/validate-api-key":null,{apiKey:e}],u,{onError:()=>{a(!1)},onSuccess:e=>{if(a(!1),e?.message)return n({allowed:!1}),void i({status:"error",content:e.message});n({allowed:!0},!0)}});return{data:o,error:l,isLoading:t,isFetching:s,mutate:c}})(l.apiKey),m=(0,r.useMemo)((()=>!(c||!s)&&"Invalid API Key"!==s?.message),[s,c]),d=(0,r.useMemo)((()=>{if(c||!s)return 0;if("Invalid API Key"===s?.message)return 0;const{user:e}=s,t=e?.plan?.limitImages+e?.bonusStockImages-e?.currentRequestImages;return isNaN(t)?0:t}),[s,c]),g=(0,r.useCallback)((()=>{window.open("https://app.imageseo.com/plan/","_blank")}),[]);return React.createElement(n.Animate,{type:c?"loading":""},(({className:r})=>React.createElement(n.Card,null,React.createElement(n.CardHeader,null,React.createElement("div",{className:"header-container"},React.createElement("div",{className:"header"},React.createElement("img",{className:"logo",src:i,alt:"logo"}),React.createElement(n.__experimentalHeading,{align:"center"},e),React.createElement(n.ExternalLink,{className:"visit-website",href:"https://www.imageseo.com",target:"_blank"},(0,o.__)("Visit website","imageseo"))),React.createElement("div",null,m&&React.createElement("span",{className:"remaining-credits-info"},c?React.createElement(n.Spinner,null):sprintf((0,o.__)("Remaining credits %d","imageseo"),d))),React.createElement("div",{className:"cta"},React.createElement("span",null,React.createElement(n.Button,{variant:"primary",onClick:g},(0,o.__)("Buy more credits","imageseo")))))),React.createElement(n.CardBody,{className:r},t),React.createElement(n.CardFooter,null,React.createElement(n.__experimentalText,null,""),a&&React.createElement(n.Button,{type:"submit",variant:"secondary"},(0,o.__)("Save","imageseo"))))))},ue={a:{content:9,self:!1,type:105},address:{invalid:["h1","h2","h3","h4","h5","h6","address","article","aside","section","div","header","footer"],self:!1},audio:{children:["track","source"]},br:{type:9,void:!0},body:{content:127},button:{content:8,type:105},caption:{content:1,parent:["table"]},col:{parent:["colgroup"],void:!0},colgroup:{children:["col"],parent:["table"]},details:{children:["summary"],type:97},dd:{content:1,parent:["dl"]},dl:{children:["dt","dd"],type:1},dt:{content:1,invalid:["footer","header"],parent:["dl"]},figcaption:{content:1,parent:["figure"]},footer:{invalid:["footer","header"]},header:{invalid:["footer","header"]},hr:{type:1,void:!0},img:{void:!0},li:{content:1,parent:["ul","ol","menu"]},main:{self:!1},ol:{children:["li"],type:1},picture:{children:["source","img"],type:25},rb:{parent:["ruby","rtc"]},rp:{parent:["ruby","rtc"]},rt:{content:8,parent:["ruby","rtc"]},rtc:{content:8,parent:["ruby"]},ruby:{children:["rb","rp","rt","rtc"]},source:{parent:["audio","video","picture"],void:!0},summary:{content:8,parent:["details"]},table:{children:["caption","colgroup","thead","tbody","tfoot","tr"],type:1},tbody:{parent:["table"],children:["tr"]},td:{content:1,parent:["tr"]},tfoot:{parent:["table"],children:["tr"]},th:{content:1,parent:["tr"]},thead:{parent:["table"],children:["tr"]},tr:{parent:["table","tbody","thead","tfoot"],children:["th","td"]},track:{parent:["audio","video"],void:!0},ul:{children:["li"],type:1},video:{children:["track","source"]},wbr:{type:9,void:!0}};function me(e){return t=>{ue[t]={...e,...ue[t]}}}["address","main","div","figure","p","pre"].forEach(me({content:1,type:65})),["abbr","b","bdi","bdo","cite","code","data","dfn","em","i","kbd","mark","q","ruby","samp","strong","sub","sup","time","u","var"].forEach(me({content:8,type:73})),["p","pre"].forEach(me({content:8,type:65})),["s","small","span","del","ins"].forEach(me({content:8,type:9})),["article","aside","footer","header","nav","section","blockquote"].forEach(me({content:1,type:67})),["h1","h2","h3","h4","h5","h6"].forEach(me({content:8,type:69})),["audio","canvas","iframe","img","video"].forEach(me({type:89}));const de=Object.freeze(ue),ge=["applet","base","body","command","embed","frame","frameset","head","html","link","meta","noscript","object","script","style","title"],pe=Object.keys(de).filter((e=>"canvas"!==e&&"iframe"!==e)),he=Object.freeze({alt:1,cite:1,class:1,colspan:3,controls:4,datetime:1,default:4,disabled:4,dir:1,height:1,href:1,id:1,kind:1,label:1,lang:1,loading:1,loop:4,media:1,muted:4,poster:1,rel:1,role:1,rowspan:3,scope:1,sizes:1,span:3,start:3,style:5,src:1,srclang:1,srcset:1,tabindex:1,target:1,title:1,type:1,width:1}),fe=Object.freeze({class:"className",colspan:"colSpan",datetime:"dateTime",rowspan:"rowSpan",srclang:"srcLang",srcset:"srcSet",tabindex:"tabIndex"});function _e(){return _e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},_e.apply(this,arguments)}function ve({attributes:e={},className:a,children:n=null,selfClose:r=!1,tagName:i}){const o=i;return r?t().createElement(o,_e({className:a},e)):t().createElement(o,_e({className:a},e),n)}class ye{attribute(e,t){return t}node(e,t){return t}}var be=a(580),Ee=a.n(be);function Re(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const we=/(url|image|image-set)\(/i;class Se extends ye{attribute(e,t){return"style"===e&&Object.keys(t).forEach((e=>{String(t[e]).match(we)&&delete t[e]})),t}}const Ce=/^<(!doctype|(html|head|body)(\s|>))/i,Te=/^(aria-|data-|\w+:)/iu,xe=/{{{(\w+)\/?}}}/;function ke(){if("undefined"!=typeof window&&"undefined"!=typeof document)return document.implementation.createHTMLDocument("Interweave")}class Ne{constructor(e,t={},a=[],n=[]){var r;Re(this,"allowed",void 0),Re(this,"banned",void 0),Re(this,"blocked",void 0),Re(this,"container",void 0),Re(this,"content",[]),Re(this,"props",void 0),Re(this,"matchers",void 0),Re(this,"filters",void 0),Re(this,"keyIndex",void 0),this.props=t,this.matchers=a,this.filters=[...n,new Se],this.keyIndex=-1,this.container=this.createContainer(e||""),this.allowed=new Set(null!==(r=t.allowList)&&void 0!==r?r:pe),this.banned=new Set(ge),this.blocked=new Set(t.blockList)}applyAttributeFilters(e,t){return this.filters.reduce(((t,a)=>null!==t&&"function"==typeof a.attribute?a.attribute(e,t):t),t)}applyNodeFilters(e,t){return this.filters.reduce(((t,a)=>null!==t&&"function"==typeof a.node?a.node(e,t):t),t)}applyMatchers(e,t){const a={},{props:n}=this;let r=e,i=0,o=null;return this.matchers.forEach((e=>{const l=e.asTag().toLowerCase(),s=this.getTagConfig(l);if(n[e.inverseName]||!this.isTagAllowed(l))return;if(!this.canRenderChild(t,s))return;let c="";for(;r&&(o=e.match(r));){const{index:t,length:l,match:s,valid:u,void:m,...d}=o,g=e.propName+String(i);t>0&&(c+=r.slice(0,t)),u?(c+=m?`{{{${g}/}}}`:`{{{${g}}}}${s}{{{/${g}}}}`,this.keyIndex+=1,i+=1,a[g]={children:s,matcher:e,props:{...n,...d,key:this.keyIndex}}):c+=s,e.greedy?(r=c+r.slice(t+l),c=""):r=r.slice(t+(l||s.length))}e.greedy||(r=c+r)})),0===i?e:this.replaceTokens(r,a)}canRenderChild(e,t){return!(!e.tagName||!t.tagName)&&!e.void&&(e.children.length>0?e.children.includes(t.tagName):!(e.invalid.length>0&&e.invalid.includes(t.tagName))&&(t.parent.length>0?t.parent.includes(e.tagName):!(!e.self&&e.tagName===t.tagName)&&Boolean(e&&e.content&t.type)))}convertLineBreaks(e){const{noHtml:t,disableLineBreaks:a}=this.props;if(t||a||e.match(/<((?:\/[ a-z]+)|(?:[ a-z]+\/))>/gi))return e;let n=e.replace(/\r\n/g,"\n");return n=n.replace(/\n{3,}/g,"\n\n\n"),n=n.replace(/\n/g,"<br/>"),n}createContainer(e){var t;const n=(void 0!==a.g&&a.g.INTERWEAVE_SSR_POLYFILL||ke)();if(!n)return;const r=null!==(t=this.props.containerTagName)&&void 0!==t?t:"body",i="body"===r||"fragment"===r?n.body:n.createElement(r);return e.match(Ce)||(i.innerHTML=this.convertLineBreaks(this.props.escapeHtml?Ee()(e):e)),i}extractAttributes(e){const{allowAttributes:t}=this.props,a={};let n=0;return 1===e.nodeType&&e.attributes?([...e.attributes].forEach((r=>{const{name:i,value:o}=r,l=i.toLowerCase(),s=he[l]||he[i];if(!this.isSafe(e))return;if(!l.match(Te)&&(!t&&(!s||2===s)||l.startsWith("on")||o.replace(/(\s|\0|&#x0([9AD]);)/,"").match(/(javascript|vbscript|livescript|xss):/i)))return;let c="style"===l?this.extractStyleAttribute(e):o;4===s?c=!0:3===s?c=Number.parseFloat(String(c)):5!==s&&(c=String(c)),a[fe[l]||l]=this.applyAttributeFilters(l,c),n+=1})),0===n?null:a):null}extractStyleAttribute(e){const t={};return Array.from(e.style).forEach((a=>{const n=e.style[a];"string"!=typeof n&&"number"!=typeof n||(t[a.replace(/-([a-z])/g,((e,t)=>String(t).toUpperCase()))]=n)})),t}getTagConfig(e){const t={children:[],content:0,invalid:[],parent:[],self:!0,tagName:"",type:0,void:!1};return de[e]?{...t,...de[e],tagName:e}:t}isSafe(e){if("undefined"!=typeof HTMLAnchorElement&&e instanceof HTMLAnchorElement){const t=e.getAttribute("href");if(null!=t&&t.startsWith("#"))return!0;const a=e.protocol.toLowerCase();return":"===a||"http:"===a||"https:"===a||"mailto:"===a||"tel:"===a}return!0}isTagAllowed(e){return!this.banned.has(e)&&!this.blocked.has(e)&&(this.props.allowElements||this.allowed.has(e))}parse(){return this.container?this.parseNode(this.container,this.getTagConfig(this.container.nodeName.toLowerCase())):[]}parseNode(e,a){const{noHtml:n,noHtmlExceptMatchers:r,allowElements:i,transform:o,transformOnlyAllowList:l}=this.props;let s=[],c="";return[...e.childNodes].forEach((e=>{if(1===e.nodeType){const m=e.nodeName.toLowerCase(),d=this.getTagConfig(m);c&&(s.push(c),c="");const g=this.applyNodeFilters(m,e);if(!g)return;let p;if(o&&(!l||this.isTagAllowed(m))){this.keyIndex+=1;const e=this.keyIndex;p=this.parseNode(g,d);const a=o(g,p,d);if(null===a)return;if(void 0!==a)return void s.push(t().cloneElement(a,{key:e}));this.keyIndex=e-1}if(this.banned.has(m))return;if(n||r&&"br"!==m||!this.isTagAllowed(m)||!i&&!this.canRenderChild(a,d))s=[...s,...this.parseNode(g,d.tagName?d:a)];else{var u;this.keyIndex+=1;const e=this.extractAttributes(g),a={tagName:m};e&&(a.attributes=e),d.void&&(a.selfClose=d.void),s.push(t().createElement(ve,{...a,key:this.keyIndex},null!==(u=p)&&void 0!==u?u:this.parseNode(g,d)))}}else if(3===e.nodeType){const t=n&&!r?e.textContent:this.applyMatchers(e.textContent||"",a);Array.isArray(t)?s=[...s,...t]:c+=t}})),c&&s.push(c),s}replaceTokens(e,t){if(!e.includes("{{{"))return e;const a=[];let n=e,r=null;for(;r=n.match(xe);){const[e,i]=r,o=r.index,l=e.includes("/");o>0&&(a.push(n.slice(0,o)),n=n.slice(o));const{children:s,matcher:c,props:u}=t[i];let m;if(l)m=e.length,a.push(c.createElement(s,u));else{const r=n.match(new RegExp(`{{{/${i}}}}`));m=r.index+r[0].length,a.push(c.createElement(this.replaceTokens(n.slice(e.length,r.index),t),u))}n=n.slice(m)}return n.length>0&&a.push(n),0===a.length?"":1===a.length&&"string"==typeof a[0]?a[0]:a}}function Oe(e){var a;const{attributes:n,className:r,containerTagName:i,content:o,emptyContent:l,parsedContent:s,tagName:c,noWrap:u}=e,m=null!==(a=null!=i?i:c)&&void 0!==a?a:"span",d="fragment"===m||u;let g;if(s)g=s;else{const t=new Ne(null!=o?o:"",e).parse();t.length>0&&(g=t)}return g||(g=l),d?t().createElement(t().Fragment,null,g):t().createElement(ve,{attributes:n,className:r,tagName:m},g)}const Le=()=>{const{options:e,global:t,setOptions:a,addNotice:i}=se(),[l,c]=(0,r.useState)(!1),[u,m]=(0,r.useState)(e?.allowed),[d,g]=(0,r.useState)(""),[p,h]=(0,r.useState)({firstName:t?.user?.firstName||"",lastName:t?.user?.lastName||"",email:t?.user?.email||"",password:"",terms:!1,news:!1}),f=async()=>{try{g(""),c(!0);const t=await s()({path:"/imageseo/v1/validate-api-key",method:"POST",data:{apiKey:e.apiKey}});if(void 0!==t?.data?.message)return a({allowed:!1}),g(t?.data?.message),c(!1),void i({status:"error",content:t?.data?.message});c(!1),a({allowed:!0}),i({status:"success",content:(0,o.__)("API key validated","imageseo")})}catch(e){c(!1),i({status:"error",content:(0,o.__)("Error validating API key","imageseo")}),console.error("Error validating API key:",e)}},_=async()=>{try{c(!0);const e=await s()({path:"/imageseo/v1/register",method:"POST",data:p});if(Object.prototype.hasOwnProperty.call(e,"success")&&!e?.success)throw new Error(Array.isArray(e?.data?.message)?e?.data?.message.join(","):e?.data?.message);if(e?.message)throw i({status:"error",content:e?.message}),new Error("Something went wrong");a({apiKey:e?.projects?.[0]?.apiKey,allowed:!0},!1),i({status:"success",content:(0,o.__)("Account created","imageseo")}),m(!0),c(!1)}catch(e){console.log(e),c(!1),i({status:"error",content:e.message}),console.error("Error registering account:",e)}},v=(e,t)=>{h({...p,[e]:t})};return React.createElement("div",{className:"welcome-screen"},React.createElement(n.__experimentalHeading,{order:3,lineHeight:2,align:"center"},(0,o.__)("Welcome to ImageSEO","imageseo")),React.createElement(n.__experimentalText,{align:"center"},React.createElement(Oe,{content:sprintf((0,o.__)("To get started with ImageSEO you will need your own API key. If you don't have an API key already, you should %s register an account %s to get one.","imageseo"),'<a href="https://app.imageseo.com/" target="_blank">',"</a>")})),React.createElement(n.Animate,{type:l?"loading":""},(({className:t})=>React.createElement(React.Fragment,null,u?React.createElement("div",{className:`form-container ${t||""}`},React.createElement(n.TextControl,{label:(0,o.__)("API Key","imageseo"),value:e?.apiKey||"",onChange:e=>a({apiKey:e})}),React.createElement(n.Flex,{justifyContent:"spaceBetween"},React.createElement(n.FlexItem,null,React.createElement(n.Button,{disabled:l,variant:"primary",onClick:f},l?(0,o.__)("Validating…","imageseo"):(0,o.__)("Validate key","imageseo"))),!e?.allowed&&React.createElement(n.FlexItem,null,React.createElement(n.Button,{variant:"secondary",onClick:()=>m(!1)},(0,o.__)("I want to register for a free account","imageseo"))),e?.allowed&&React.createElement(n.FlexItem,null,React.createElement(n.Icon,{icon:"yes",style:{color:"#52c41a"}}),React.createElement(n.__experimentalText,{variant:"muted"},(0,o.__)("API key validated","imageseo")))),d&&React.createElement(n.__experimentalText,{variant:"error"},d)):React.createElement("div",{className:`form-container ${t||""}`},React.createElement(n.TextControl,{label:(0,o.__)("First name","imageseo"),value:p.firstName,onChange:e=>v("firstName",e)}),React.createElement(n.TextControl,{label:(0,o.__)("Last name","imageseo"),value:p.lastName,onChange:e=>v("lastName",e)}),React.createElement(n.TextControl,{label:(0,o.__)("Email","imageseo"),type:"email",value:p.email,onChange:e=>v("email",e)}),React.createElement(n.TextControl,{type:"password",label:(0,o.__)("Password","imageseo"),value:p.password,onChange:e=>v("password",e)}),React.createElement(n.CheckboxControl,{label:(0,o.__)("I agree to the terms and conditions","imageseo"),help:React.createElement(n.__experimentalText,{variant:"muted"},(0,o.__)("By creating an account, you agree to our terms and conditions.","imageseo"),React.createElement(n.ExternalLink,{style:{marginLeft:5},href:"https://imageseo.io/terms-conditions/"},(0,o.__)("Read more","imageseo"))),checked:p.terms,onChange:e=>v("terms",e)}),React.createElement(n.CheckboxControl,{label:(0,o.__)("I want to receive news and updates","imageseo"),help:(0,o.__)("You can unsubscribe at any time","imageseo"),checked:p.news,onChange:e=>v("news",e)}),React.createElement(n.Flex,null,React.createElement(n.FlexItem,null,React.createElement(n.Button,{variant:"primary",disabled:l,onClick:_},(0,o.__)("Create account","imageseo"))),React.createElement(n.FlexItem,null,React.createElement(n.Button,{variant:"secondary",disabled:l,onClick:()=>m(!0)},(0,o.__)("I already have an account","imageseo")))))))))},Ie=({id:e,label:t,help:a,value:i,onChange:l})=>{const[s,c]=(0,r.useState)(i),u=()=>{const e=wp.media({title:(0,o.__)("Select or Upload Media","imageseo"),button:{text:(0,o.__)("Use this item","imageseo")},multiple:!1});e.on("select",(()=>{const t=e.state().get("selection").first().toJSON();c(t.url),l(t.url)})),e.open()};return React.createElement("div",{className:"media-uploader-container",onClick:u},React.createElement(n.BaseControl,{id:e,label:t,help:a,className:"media-uploader"},!s&&React.createElement(n.Button,{variant:"primary",onClick:u},(0,o.__)("Select Image","imageseo")),s&&React.createElement("img",{src:s,alt:"Selected"})))},Me=()=>{const{options:e,setOptions:t}=se();return React.createElement("div",null,React.createElement(n.ToggleControl,{label:(0,o.__)("Subtitle","imageseo"),checked:e.socialMediaSettings?.visibilitySubTitle,onChange:a=>{t({...e,socialMediaSettings:{...e.socialMediaSettings,visibilitySubTitle:a}})},help:(0,o.__)("Show the price product or author depending on the page ( Product price (WooCommerce only) )","imageseo")}),React.createElement(n.ToggleControl,{label:(0,o.__)("Subtitle 2","imageseo"),checked:e.socialMediaSettings?.visibilitySubTitleTwo,onChange:a=>{t({...e,socialMediaSettings:{...e.socialMediaSettings,visibilitySubTitleTwo:a}})},help:(0,o.__)("Show the reading time of an article or the number of reviews (WooCommerce only).","imageseo")}),React.createElement(n.ToggleControl,{label:(0,o.__)("Stars rating","imageseo"),checked:e.socialMediaSettings?.visibilityRating,onChange:a=>{t({...e,socialMediaSettings:{...e.socialMediaSettings,visibilityRating:a}})},help:(0,o.__)("Show the stars linked to a review of your product for example.","imageseo")}),React.createElement(n.ToggleControl,{label:(0,o.__)("Author avatar","imageseo"),checked:e.socialMediaSettings?.visibilityAvatar,onChange:a=>{t({...e,socialMediaSettings:{...e.socialMediaSettings,visibilityAvatar:a}})},help:(0,o.__)("Only used for post content.","imageseo")}),React.createElement(n.__experimentalToggleGroupControl,{style:{width:300},value:e.socialMediaSettings?.layout||"CARD_LEFT",label:(0,o.__)("Layout","imageseo"),help:(0,o.__)("Choose the layout of the social card.","imageseo"),onChange:a=>{t({...e,socialMediaSettings:{...e.socialMediaSettings,layout:a}})}},React.createElement(n.__experimentalToggleGroupControlOption,{type:"button",value:"CARD_LEFT",label:(0,o.__)("Card left","imageseo")}),React.createElement(n.__experimentalToggleGroupControlOption,{type:"button",value:"CARD_RIGHT",label:(0,o.__)("Card right","imageseo")})),React.createElement(n.__experimentalToggleGroupControl,{value:e.socialMediaSettings?.textAlignment||"top",onChange:a=>{t({...e,socialMediaSettings:{...e.socialMediaSettings,textAlignment:a}})},label:(0,o.__)("Text alignment","imageseo")},React.createElement(n.__experimentalToggleGroupControlOption,{type:"button",value:"top",label:(0,o.__)("Top","imageseo")}),React.createElement(n.__experimentalToggleGroupControlOption,{type:"button",value:"center",label:(0,o.__)("Center","imageseo")}),React.createElement(n.__experimentalToggleGroupControlOption,{type:"button",value:"bottom",label:(0,o.__)("Bottom","imageseo")})),React.createElement(n.__experimentalGrid,{columns:3},React.createElement(n.BaseControl,{id:"text-color",label:(0,o.__)("Text color","imageseo")},React.createElement(n.ColorPicker,{defaultValue:e.socialMediaSettings?.textColor||"#000000",onChange:a=>{t({...e,socialMediaSettings:{...e.socialMediaSettings,textColor:a}})}})),React.createElement(n.BaseControl,{id:"background-color",label:(0,o.__)("Background color","imageseo")},React.createElement(n.ColorPicker,{defaultValue:e.socialMediaSettings?.contentBackgroundColor||"#ffffff",onChange:a=>{t({...e,socialMediaSettings:{...e.socialMediaSettings,contentBackgroundColor:a}})}})),e.socialMediaSettings?.visibilityRating&&React.createElement(n.BaseControl,{id:"star-color",label:(0,o.__)("Star color","imageseo")},React.createElement(n.ColorPicker,{defaultValue:e.socialMediaSettings?.starColor||"#F8CA00",onChange:a=>{t({...e,socialMediaSettings:{...e.socialMediaSettings,starColor:a}})}}))),React.createElement(Ie,{label:(0,o.__)("Logo","imageseo"),value:e?.socialMediaSettings?.logoUrl,help:(0,o.__)("Click to upload a logo","imageseo"),onChange:a=>{t({...e,socialMediaSettings:{...e.socialMediaSettings,logoUrl:a}})}}),React.createElement(n.__experimentalDivider,{style:{marginTop:15,marginBottom:15}}),React.createElement(Ie,{label:(0,o.__)("Background image","imageseo"),value:e?.socialMediaSettings?.defaultBgImg,help:(0,o.__)("Click to upload a background Image","imageseo"),onChange:a=>{t({...e,socialMediaSettings:{...e.socialMediaSettings,defaultBgImg:a}})}}))},Ae=a.p+"images/avatar-default.00d4ecf9.jpg",Pe=({color:e})=>React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:e||"rgb(248, 202, 0)",stroke:e||"rgb(248, 202, 0)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-star"},React.createElement("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})),Fe=()=>{const{options:e}=se(),t=e?.socialMediaSettings||{},{layout:a,defaultBgImg:r,logoUrl:i,textColor:l,visibilitySubTitle:s,visibilitySubTitleTwo:c,visibilityRating:u,visibilityAvatar:m,contentBackgroundColor:d,starColor:g}=t;return React.createElement("div",{className:"previewer"},"CARD_LEFT"===a&&React.createElement("div",{className:"bg-image",style:{backgroundImage:`url(${r})`}}),React.createElement("div",{className:"content",style:{backgroundColor:d}},React.createElement("div",{className:"padded"},React.createElement("img",{src:i,alt:"logo",className:"logo"}),React.createElement(n.__experimentalHeading,{level:2,lineHeight:1.5,style:{color:l}},(0,o.__)("Lorem ipsum (post title)","imageseo")),s&&React.createElement(n.__experimentalHeading,{level:3,lineHeight:1.5,style:{color:l}},(0,o.__)("Lorem ipsum (sub title)","imageseo")),c&&React.createElement(n.__experimentalHeading,{level:4,lineHeight:1.5,style:{color:l}},(0,o.__)("Lorem ipsum (sub title two)","imageseo")),m&&React.createElement("img",{src:Ae,alt:"default avatar",className:"avatar"}),u&&React.createElement("div",null,React.createElement(Pe,{color:g}),React.createElement(Pe,{color:g}),React.createElement(Pe,{color:g}),React.createElement(Pe,{color:g}),React.createElement(Pe,{color:g})))),"CARD_RIGHT"===a&&React.createElement("div",{className:"bg-image",style:{backgroundImage:`url(${r})`}}))},ze=()=>{const{loading:e}=se();return React.createElement(n.Animate,{type:e?"loading":""},(({className:e})=>React.createElement("div",{className:`${e||""} social-card-screen`},React.createElement(Me,null),React.createElement(Fe,null))))},Be=()=>{const[e,t]=(0,r.useState)(!0),{data:a,error:n,isLoading:i,mutate:o}=ee("/imageseo/v1/image-query",c,{onError:()=>{t(!1)},onSuccess:()=>{t(!1)},revalidateIfStale:!1,revalidateOnFocus:!1,revalidateOnReconnect:!1});return{data:a,error:n,isLoading:e,isFetching:i,mutate:o}},De=()=>{const{options:e,setOptions:t,global:a}=se(),{mutate:r}=Be();return React.createElement("div",{className:"form"},React.createElement(n.SelectControl,{label:(0,o.__)("Images to optimize","imageseo"),value:e?.altFilter||"ALL",onChange:e=>{t({altFilter:e}),r()},options:(a.altSpecification||[]).map((e=>({value:e.id,label:e.label})))}),React.createElement(n.SelectControl,{label:(0,o.__)("Optimize alt text","imageseo"),value:e?.altFill||"FILL_ALL",onChange:e=>{t({altFill:e}),r()},options:[{value:"FILL_ALL",label:(0,o.__)("Optimize all ALT texts","imageseo")},{value:"FILL_ONLY_EMPTY",label:(0,o.__)("Optimize only missing ALT texts","imageseo")}]}),React.createElement(n.ToggleControl,{checked:e?.optimizeTitle,onChange:e=>{t({optimizeTitle:e})},label:(0,o.__)("Optimize title","imageseo")}),React.createElement(n.ToggleControl,{checked:e?.optimizeCaption,onChange:e=>{t({optimizeCaption:e})},label:(0,o.__)("Optimize caption","imageseo")}),React.createElement(n.ToggleControl,{checked:e?.optimizeFile,onChange:e=>{t({optimizeFile:e})},label:(0,o.__)("Rename files","imageseo")}))},He=()=>{const[e,t]=(0,r.useState)(!0),{data:a,error:n,isLoading:i,mutate:o}=ee("/imageseo/v1/get-bulk-optimizer-status",c,{onError:()=>{t(!1)},onSuccess:()=>{t(!1)},refreshInterval:1e4});return{data:a,error:n,isLoading:e,isFetching:i,mutate:o}},$e=()=>{const{global:e,options:t,addNotice:a}=se(),{data:i,isLoading:l,error:c,mutate:u}=He(),{data:m,mutate:d}=Be(),g=async()=>{await s()({path:"/imageseo/v1/start-bulk-optimizer",method:"POST"}),u(),a({status:"success",content:(0,o.__)("Optimizer started","imageseo")})},p=(0,r.useMemo)((()=>i?.report?.errors?.length>0&&void 0!==i?.report?.errors?.find((e=>"You have reached the limit of images to optimize"===e.trim()))),[i?.report?.errors]);return l?React.createElement(n.Placeholder,{className:"optimizer",icon:"update",label:(0,o.__)("Loading","imageseo"),instructions:(0,o.__)("Loading…","imageseo")}):c?React.createElement(n.Placeholder,{className:"optimizer",icon:"warning",label:(0,o.__)("Error","imageseo"),instructions:(0,o.__)("An error occurred while fetching the optimizer status.","imageseo")}):"idle"===i?.status&&p?React.createElement("div",{className:"optimizer"},React.createElement(n.__experimentalText,null,(0,o.__)("You have reached the limit of images to optimize.","imageseo")),React.createElement(n.__experimentalSpacer,{marginY:"5"}),React.createElement(n.Button,{variant:"primary",disabled:"running"===i?.status,onClick:g},(0,o.__)("Try again","imageseo"))):React.createElement("div",{className:"optimizer"},"idle"===i?.status&&React.createElement(React.Fragment,null,"NEXTGEN_GALLERY"===t?.altFilter&&React.createElement(n.__experimentalText,null,(0,o.sprintf)((0,o.__)("There are %1$s images in your NEXTGEN library and %2$s don't have an alternative text.","imageseo"),e.bulkQuery.ids.length||0,e.bulkQuery.nonOptimized.length||0)),"NEXTGEN_GALLERY"!==t?.altFilter&&React.createElement(n.__experimentalText,null,(0,o.sprintf)((0,o.__)("There are %1$s images in your media library and %2$s don't have an alternative text.","imageseo"),m?.totalImages||0,m?.totalNoAlt||0)),React.createElement(n.__experimentalSpacer,{marginY:"5"}),React.createElement(n.Button,{variant:"primary",disabled:"running"===i?.status,onClick:g},(0,o.__)("Start optimization","imageseo"))),"running"===i?.status&&React.createElement("div",{className:"progress"},React.createElement(n.__experimentalText,null,(0,o.sprintf)((0,o.__)("Optimizing %1$s images. ( %2$s/%3$s )","imageseo"),i?.report?.total,i?.report?.optimized,i?.report?.total)),React.createElement("progress",{value:i?.report?.optimized/i?.report?.total*100,max:100}),React.createElement(n.__experimentalSpacer,{marginY:"3"}),React.createElement(n.Button,{variant:"primary",onClick:async()=>{await s()({path:"/imageseo/v1/stop-bulk-optimizer",method:"POST"}),u(),d(),a({status:"success",content:(0,o.__)("Optimizer stopped","imageseo")})}},(0,o.__)("Stop optimizer","imageseo"))))},je=()=>{const{loading:e}=se(),{data:t}=He();return React.createElement(n.Animate,{type:e?"loading":""},(({className:e})=>React.createElement("div",{className:`${e||""}`},React.createElement(n.__experimentalDivider,{style:{marginTop:15,marginBottom:15}}),React.createElement(n.__experimentalHeading,{level:4},"running"===t?.status?(0,o.__)("Current report","imageseo"):(0,o.__)("Last report","imageseo")),React.createElement(n.__experimentalText,null,(0,o.__)("Optimized: ","imageseo")," ",t?.report.optimized),React.createElement("br",null),React.createElement(n.__experimentalText,null,(0,o.__)("Skipped: ","imageseo")," ",t?.report.skipped),React.createElement("br",null),React.createElement(n.__experimentalText,null,(0,o.__)("Failed: ","imageseo")," ",t?.report.failed))))},Ve=()=>{const{loading:e}=se();return React.createElement(n.Animate,{type:e?"loading":""},(({className:e})=>React.createElement(React.Fragment,null,React.createElement("div",{className:`${e||""} bulk-optimizer-screen`},React.createElement(De,null),React.createElement($e,null)),React.createElement(je,null))))},Ge=()=>{const{options:e,global:t,setOptions:a}=se(),i=(0,r.useMemo)((()=>{const a=e?.defaultLanguageIa||t?.currentLanguage||"en";return a.includes("_")?a.split("_")[0]:a}),[t?.currentLanguage,e?.defaultLanguageIa]);return React.createElement("div",null,React.createElement(n.__experimentalHeading,{level:4,lineHeight:2},(0,o.__)("On-upload optimization","imageseo")),React.createElement(n.ToggleControl,{label:(0,o.__)("Fill alt","imageseo"),help:(0,o.__)("The plugin will automatically write an alternative to the images you will upload.","imageseo"),checked:e.activeAltWriteUpload,onChange:e=>a({activeAltWriteUpload:e})}),React.createElement(n.ToggleControl,{checked:e?.activeOptimizeTitle,onChange:e=>{a({activeOptimizeTitle:e})},help:(0,o.__)("The plugin will automatically rewrite with SEO friendly content the title of the images you will upload.","imageseo"),label:(0,o.__)("Optimize title","imageseo")}),React.createElement(n.ToggleControl,{checked:e?.activeOptimizeCaption,onChange:e=>{a({activeOptimizeCaption:e})},help:(0,o.__)("The plugin will automatically rewrite with SEO friendly content the caption of the images you will upload.","imageseo"),label:(0,o.__)("Optimize caption","imageseo")}),React.createElement(n.ToggleControl,{label:(0,o.__)("Rename files","imageseo"),help:(0,o.__)("The plugin will automatically rewrite with SEO friendly content the name of the images you will upload.","imageseo"),checked:e.activeRenameWriteUpload,onChange:e=>a({activeRenameWriteUpload:e})}),React.createElement(n.SelectControl,{label:(0,o.__)("Language","imageseo"),options:t.languages||[],onChange:e=>{a({defaultLanguageIa:e})},value:i}),React.createElement(n.__experimentalDivider,{style:{marginTop:15,marginBottom:15}}),React.createElement(n.__experimentalHeading,{level:4,lineHeight:2},(0,o.__)("Social media card generator","imageseo")),React.createElement(n.__experimentalText,{style:{marginBottom:15,display:"inline-block"}},(0,o.__)("Automatic generation for the following post types:","imageseo")),t?.allowedPostTypes?.map((t=>React.createElement("div",{key:t.value,style:{maxWidth:300}},React.createElement(n.ToggleControl,{__nextHasNoMarginBottom:!0,checked:(e?.socialMediaPostTypes||[]).includes(t.value),label:t.label,onChange:n=>((t,n)=>{n&&!(e?.socialMediaPostTypes||[]).includes(t)&&a({socialMediaPostTypes:[...e?.socialMediaPostTypes||[],t]}),!n&&(e?.socialMediaPostTypes||[]).includes(t)&&a({socialMediaPostTypes:(e?.socialMediaPostTypes||[]).filter((e=>e!==t))})})(t.value,n)})))))},We=()=>{const{loading:e}=se();return React.createElement(n.Animate,{type:e?"loading":""},(({className:e})=>React.createElement("div",{className:`${e||""} social-card-screen`},React.createElement(Ge,null))))},Ue=()=>{const[e,t]=(0,r.useState)(!1),{data:a,isLoading:i}=ee("/imageseo/v1/optimizer-errors",c,{refreshInterval:1e4}),{data:o,isLoading:l}=ee("/imageseo/v1/debug-info",c,{refreshInterval:1e4});return(0,r.useEffect)((()=>{localStorage.getItem("imageseo_debug_log")&&t(!0)}),[]),e?i?React.createElement(n.Spinner,null):React.createElement(React.Fragment,null,React.createElement("h4",null,"Error Log"),React.createElement("pre",null,JSON.stringify(a,null,2)),React.createElement("h4",null,"Debug Info"),React.createElement("pre",null,JSON.stringify(o,null,2))):null},Ke=new URLSearchParams(window.location.search).get("activeTab"),Ye=localStorage.getItem("imageseo_debug_log");function qe(){const{options:e,notices:t,removeNotice:a}=se(),[i,l]=(0,r.useState)(Ke||"welcome");return React.createElement(React.Fragment,null,React.createElement(ce,{heading:(0,o.__)("ImageSEO","imageseo")},React.createElement(n.__experimentalToggleGroupControl,{label:"",onChange:e=>{l(e);const t=new URL(window.location.href);t.searchParams.set("activeTab",e),window.history.replaceState(null,null,t)},value:i,isBlock:!0},React.createElement(n.__experimentalToggleGroupControlOption,{type:"button",value:"welcome",label:(0,o.__)("Welcome","imageseo")}),React.createElement(n.__experimentalToggleGroupControlOption,{disabled:!e?.allowed||!1,type:"button",value:"socialcard",label:(0,o.__)("Social card","imageseo")}),React.createElement(n.__experimentalToggleGroupControlOption,{disabled:!e?.allowed||!1,type:"button",value:"bulkoptimizer",label:(0,o.__)("Bulk optimization","imageseo")}),React.createElement(n.__experimentalToggleGroupControlOption,{disabled:!e?.allowed||!1,type:"button",value:"settings",label:(0,o.__)("Settings","imageseo")})),"welcome"===i&&React.createElement(Le,null),"socialcard"===i&&React.createElement(ze,null),"bulkoptimizer"===i&&React.createElement(Ve,null),"settings"===i&&React.createElement(We,null)),Ye&&React.createElement(Ue,null),React.createElement(n.SnackbarList,{notices:t,onRemove:a}))}document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("imageseo-settings-v2");(0,r.createRoot)(e).render(React.createElement(le,null,React.createElement(qe,null)))}))})()})();